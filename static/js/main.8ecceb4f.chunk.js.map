{"version":3,"sources":["redux/dialog-reducer.js","api/api.js","img/loader.gif","hoc/withAuthRedirect.js","components/Sidebar/Navbar/Navbar.module.css","redux/sidebar-reducer.js","redux/users-reducer.js","redux/auth-reducer.js","redux/app-reducer.js","redux/redux-store.js","components/Sidebar/Navbar/Navbar.js","components/Sidebar/Friends/Friend/Friend.js","components/Sidebar/Friends/Friends.js","components/Sidebar/Friends/FriendsContainer.js","components/Sidebar/Sidebar.js","components/News/News.js","components/Music/Music.js","common/Paginator/Paginator.js","components/Users/User.js","components/Users/Users.js","redux/users-selectors.js","components/Users/UsersContainer.js","components/Settings/Settings.js","components/Header/Header.js","components/Header/HeaderContainer.js","components/Login/Login.js","App.js","hoc/withSuspense.js","serviceWorker.js","index.js","common/FormsControls/FormsControls.module.css","components/Header/Header.module.css","common/Preloader/Preloader.js","common/FormsControls/FormsControls.js","utils/validators/validators.js","redux/profile-reducer.js"],"names":["initialState","dialogsData","name","id","messagesData","text","addDialogActionCreator","newMessageBody","type","dialogsReducer","state","action","stateCopy","instance","axios","withCredentials","baseURL","headers","userAPI","getUsers","currentPage","pageSize","get","then","response","data","follow","itemId","post","unFollow","delete","getProfile","userId","console","warn","profileAPI","getStatus","updateStatus","status","put","authAPI","me","login","email","password","rememberMe","logout","module","exports","mapStateToPropsForRedirect","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","friendsData","img","sidebarReducer","usersData","totalUsersCount","isFetching","followingInProgress","followAC","unfollowAC","setFetchingAC","toggleFollowingProgressAC","followUnfollow","dispatch","apiMethod","actionCreator","resultCode","usersReducer","map","item","followed","users","pageId","totalCount","filter","setAuthUserData","getAuthUserData","a","authReducer","initialized","appReducer","reducers","combineReducers","profilePage","profileReducer","messagesPage","sidebar","usersPage","form","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Navbar","className","s","nav","activeClassName","active","Friend","Friends","friend","key","FriendsContainer","Sidebar","News","Music","Paginator","pagesCount","Math","ceil","pages","log","portionCount","portionSize","useState","portionNumber","setPortionNumber","leftPortionNumber","rightPortionNumber","i","push","onClick","p","onPageChanged","href","User","user","toggleUnFollow","toggleFollow","photos","small","src","alt","disabled","some","Users","getUser","getPageSize","createSelector","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","setPageAC","Preloader","bind","items","Settings","Header","h","header","row","join","logo","loginBlock","HeaderContainer","LoginReduxForm","reduxForm","handleSubmit","error","onSubmit","Field","validate","required","placeholder","component","Input","style","formSummaryError","message","messages","length","stopSubmit","_error","formData","DialogsContainer","lazy","ProfileContainer","App","initializeApp","path","render","fallback","Login","withRouter","promise","Promise","all","Boolean","location","hostname","match","ReactDOM","basename","process","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","position","top","left","preloader","Element","Elem","input","meta","hasError","touched","styles","formControl","Textarea","value","maxLengthCreator","maxLength","postData","likeCount","profile","addPostActionCreator","newPostMessage","updatePostActionCreator","setStatus","getUserProfile","getUserStatus","updateUserStatus","newPost","newPostText","postId"],"mappings":"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","file":"static/js/main.8ecceb4f.chunk.js","sourcesContent":["const ADD_DIALOG = 'ADD-DIALOG';\r\nconst UPDATE_NEW_DIALOG_TEXT = 'UPDATE-NEW-DIALOG-TEXT';\r\n\r\nlet initialState = {\r\n    dialogsData: [\r\n        {name: 'Vasya', id: '1'},\r\n        {name: 'Kolyan', id: '2'},\r\n        {name: 'Lenka', id: '3'},\r\n        {name: 'Kuklovod', id: '4'},\r\n        {name: 'VovaPutin', id: '5'},\r\n    ],\r\n    messagesData: [\r\n        {text: 'Hi', id: '1'},\r\n        {text: 'How are  ?', id: '2'},\r\n        {text: 'Просто какой-то текст', id: '3'},\r\n        {text: 'еще Просто какой-то текст', id: '4'},\r\n        {text: 'еще и еще Просто какой-то текст', id: '5'},\r\n    ],\r\n    //newDialogText: 'текст заглухаss'\r\n};\r\n\r\n/*\r\nтак как подключили redux-form этим уже не пользуемся newDialogText: 'текст заглухаss'\r\nу redux-form как бы свой state и оттуда мы будем брать введенные значения и диспатчить\r\n */\r\nconst dialogsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_DIALOG: {\r\n            let text = action.newMessageBody;\r\n            // можно в одну строку копировать\r\n            //let stateCopy = {...state, messagesData: [...state.messagesData]};\r\n            //внутренности messagesData можно вообще отдельно не копировать, так как в stateCopy он будет старым и мы его тут меняем то есть если ссылка новая на объект, считается что это новый объект и происходит рендер\r\n            //let stateCopy = {...state};\r\n            // ниже копируется только массив, то есть его внутренности не копируются(точнее там ссылка на старые значения)\r\n            //stateCopy.messagesData = [...state.messagesData];\r\n            //stateCopy.messagesData.push(newDialog);\r\n            //stateCopy.newDialogText = '';\r\n            /*\r\n                пуш сегодня редко используется, поэтому перепишем\r\n                копируем state ...state\r\n                копируем messagesData и добавляем новый элемент через запятую [...state.messagesData, {text: text, id: 6}]\r\n                затираем то что было написано в textarea newDialogText: ''\r\n\r\n                так же можно обойтись без переменной stateCopy и возвращать сразу объект\r\n                return {\r\n                    ...state,\r\n                    messagesData: [...state.messagesData, {text: text, id: 6}],\r\n                    newDialogText: ''\r\n                }\r\n            */\r\n\r\n            let stateCopy = {\r\n                ...state,\r\n                messagesData: [...state.messagesData, {text: text, id: 6}],\r\n            };\r\n            return stateCopy;\r\n        }\r\n        /*case UPDATE_NEW_DIALOG_TEXT: {\r\n            let stateCopy = {...state};\r\n            /!*\r\n            тут можно не копировать messagesData в новый объект, так как мы не меняем ничего у него, если мы тут скопируем, но ничего не поменяем, объект будет считаться новым и будет перерисовка, но мы в него ничего не добавляли, значит и перересовывать не нужно\r\n             *!/\r\n            stateCopy.newDialogText = action.text;\r\n            /!*\r\n            или в одну строку\r\n            let stateCopy = {\r\n                ...state,\r\n                stateCopy.newDialogText: action.text\r\n            };\r\n             *!/\r\n            return stateCopy;\r\n        }*/\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const addDialogActionCreator = (newMessageBody) => ({ type: ADD_DIALOG, newMessageBody });\r\n\r\n// так как redux-form контролирует все формы это нам уже не нужно (то что мы обновляли каждый введенный символ)\r\n/*export const updateDialogActionCreator = (text) => ({\r\n        type: UPDATE_NEW_DIALOG_TEXT,\r\n        text: text\r\n});*/\r\nexport default dialogsReducer;","import * as axios from 'axios';\r\n/*\r\nтак как в нашу компоненту возвращается много данных, которыми она даже не пользуется, ей нужен только объект data из всего response\r\nпоэтому будем возвращать promise с этой датой тут (добавим .then(response => response.data))\r\n\r\nнапример у нас две почти одинаковые функции (запроса), отличаются только частью урла, более правильный подход обращаться не к глобальному\r\naxios а создать отдельный инстанс\r\n\r\naxios.create - instance(экземпляр axios), можно создать новый объект и в него запихать всякие данные (например), в нашем случае это какие-то настройки для работы с апи\r\n\r\nв axios всегда возвращается data - response.data\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        'API-KEY': '72b8ab47-d597-4c01-b123-5696d0cf7a9d'\r\n    }\r\n}); - сделали настройку, теперь можно делать запрос через этот экземпляр, в котором уже хранятся все натсройки, перепишем функции\r\n\r\nexport const getUsers = (currentPage = 1, pageSize = 10) => {\r\n    return axios.get(`https://social-network.samuraijs.com/api/1.0/users?page=${currentPage}&count=${pageSize}`, {\r\n        withCredentials: true,\r\n    })\r\n        .then(response => response.data);\r\n};\r\n\r\nexport const getUsers2 = (currentPage = 1, pageSize = 10) => {\r\n    return axios.get(`https://social-network.samuraijs.com/api/1.0/follow?page=${currentPage}&count=${pageSize}`, {\r\n        withCredentials: true,\r\n    })\r\n        .then(response => response.data);\r\n};\r\n\r\nперепишем функции из примера выше через наш созданный экземпляр, то есть настройки которые в instance уже храняться как бы внутри\r\nи нам не надо их везде прописывать, в том числе и baseURL сам подставится\r\n\r\nexport const getUsers = (currentPage = 1, pageSize = 10) => {\r\n    return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n        .then(response => response.data);\r\n};\r\n\r\nexport const getUsers2 = (currentPage = 1, pageSize = 10) => {\r\n    return instance.get(`follow?page=${currentPage}&count=${pageSize}`)\r\n        .then(response => response.data);\r\n};\r\n\r\nтак же можно сделать отдельный объект и в него засунуть эти функции - методы, и в наших компонентах обращаться к данному объекту и у него\r\nвызывать методы\r\n\r\nexport const userAPI = {\r\n     getUsers(currentPage = 1, pageSize = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data);\r\n    }\r\n};\r\n\r\n\r\nтакже в отдельный файл можно перенести и экземпляр с настройками от axios и импортировать его если будет много файлов\r\nтакже можно практически все время что-то улучшать, выносить и еще кучу всего делать\r\n*/\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        'API-KEY': '72b8ab47-d597-4c01-b123-5696d0cf7a9d'\r\n    }\r\n});\r\n\r\nexport const userAPI = {\r\n    //делаем запрос на юзеров\r\n     getUsers(currentPage = 1, pageSize = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data);\r\n    },\r\n    // подписка\r\n    follow(itemId) {\r\n         return instance.post(`follow/${itemId}`)\r\n    },\r\n    // отписка\r\n    unFollow(itemId) {\r\n        return instance.delete(`follow/${itemId}`)\r\n    },\r\n    /*\r\n     делаем типа рефактор, переносим метод getProfile в отдельный объект\r\n     тут console.warn предупреждаем что этот метод устарел и надо пользоваться другим\r\n     console.warn('Obselete method. Please use profileAPI object');\r\n\r\n     так же чтобы не бегать по коду и не менять везде это просто в этом объекте в этом методе просто переделигируем ему\r\n     новый метод profileAPI.getProfile\r\n\r\n     вместо return instance.get(`profile/${userId}`);\r\n     будет return profileAPI.getProfile(userId);\r\n    */\r\n    getProfile(userId) {\r\n        console.warn('Obselete method. Please use profileAPI object');\r\n        return profileAPI.getProfile(userId);\r\n    }\r\n};\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId) {\r\n        return instance.get(`profile/${userId}`);\r\n    },\r\n\r\n    getStatus(userId) {\r\n        return instance.get(`/profile/status/${userId}`);\r\n    },\r\n\r\n    updateStatus(status) {\r\n        return instance.put(`/profile/status/`, { status: status });\r\n    }\r\n};\r\n\r\nexport const authAPI = {\r\n    // авторизация\r\n    me() {\r\n        return instance.get(`auth/me`);\r\n            /* ====== axios.get(`https://social-network.samuraijs.com/api/1.0/auth/me`, {\r\n                withCredentials: true\r\n            })*/\r\n    },\r\n    // отправка данных для авторизации, из документации нужно отправить email password rememberMe (captcha)\r\n    login(email, password, rememberMe = false) {\r\n        return instance.post(`auth/login`, {\r\n            email, password, rememberMe\r\n        })\r\n    },\r\n    logout() {\r\n        return instance.delete(`auth/login`);\r\n    }\r\n};\r\n\r\n\r\n\r\n","module.exports = \"data:image/gif;base64,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\"","import React from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\n\r\n// HOC - контейнерная компонента не обзяательно классовая или функциональная или презенационная, она просто над другой компонентой\r\n// а вот это уже HOC, который мы можем экспортировать и передавать в компоненты где нужно сделать редирект если не авторизован\r\n// Component - сюда будут попадать различные компоненты\r\n// HOC - принято называть с with\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if (!this.props.isAuth)\r\n                return <Redirect to='/login' />;\r\n\r\n            return <Component {...this.props} />\r\n        };\r\n    }\r\n\r\n    let ConnectAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n    return ConnectAuthRedirectComponent;\r\n    // теперь когда мы вызываем withAuthRedirect получаем две контейнерные компоненты RedirectComponent и то что через\r\n    // connect ConnectAuthRedirectComponent\r\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__k48wd\",\"item\":\"Navbar_item__EiVN3\",\"active\":\"Navbar_active__AaJoc\"};","let initialState = {\r\n    friendsData: [\r\n        {name: 'Andrew', img: 'url-img', id: 1},\r\n        {name: 'Sasha', img: 'url2-img', id: 2},\r\n        {name: 'Fedor', img: 'url3-img', id: 3},\r\n    ]\r\n};\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n\r\n    return state;\r\n};\r\n\r\nexport default sidebarReducer;","import {userAPI} from '../api/api';\r\nimport {updateObjectInArray} from '../utils/object-helpers';\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SETUSERS = 'SET_USERS';\r\nconst SETPAGE = 'SET_PAGE';\r\nconst SETTOTALCOUNT = 'SET_TOTAL_COUNT';\r\nconst IS_FETCHING = 'IS_FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_IN_PROGRESS = 'TOGGLE_IS_FOLLOWING_IN_PROGRESS';\r\n\r\nlet initialState = {\r\n    usersData: [],\r\n    pageSize: 5,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: []\r\n};\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        // также перепишем case FOLLOW and case UNFOLLOW по сольку они практически идентичны\r\n        // создадим хелпер\r\n        case FOLLOW: {\r\n            return {\r\n                ...state,\r\n                /*\r\n                    если нужно скопировать массив делаем let stateCopy = {...state} и радуемся, но нам тут нужно скопировать и\r\n                    изменить unfollow на follow, поэтому делаем через map\r\n                    (let stateCopy = {...state} === let stateCopy = state.map(item => item) эти две записи идентичны, то есть в stateCopy в обоих случаях попадет копия state)\r\n                    в map проходимся по юзерам и возвращаем их, но 1 из них будет изменен, то есть нам нужно скопировать из state в stateCopy только того юзера которого будем менять (зачем нам все копировать  если все не меняется - КАРЛ экономим память)\r\n\r\n                    если id юзера из map равен id пришедшему из action делаем его копию и меняем у него followed, возвращаем новый объект\r\n                */\r\n                /*\r\n                usersData: updateObjectInArray(state.usersData, action.userId, 'id', {followed: true})\r\n                 перенесли в object-helpers UPD - отменил перенос, так рендеринг не происходит хз почему может вернусь\r\n                 */\r\n                usersData: state.usersData.map(item => {\r\n                    if (item.id === action.userId) {\r\n                        return {...item, followed: true}\r\n                    }\r\n\r\n                    return item;\r\n                })\r\n            }\r\n        }\r\n        case UNFOLLOW: {\r\n            return {\r\n                ...state,\r\n                /*\r\n                usersData: updateObjectInArray(state.usersData, action.userId, 'id', {followed: false})\r\n                 перенесли в object-helpers UPD - отменил перенос, так рендеринг не происходит хз почему может вернусь\r\n                 */\r\n                usersData: state.usersData.map(item => {\r\n                    if (item.id === action.userId) {\r\n                        return {...item, followed: false}\r\n                    }\r\n\r\n                    return item;\r\n                })\r\n            }\r\n        }\r\n        case SETUSERS: {\r\n            /*\r\n            копируем старый state, в users копируем пользователей которые уже были и добавляем в конец пользователей которые пришли из action (return {...state, usersData: [...state.usersData, ...action.users]})\r\n            /// upd сделали пагинацию, теперь в конец не дописываем, а перезатираем новыми данными, кот пришли с сервака (return {...state, usersData: action.users})\r\n            */\r\n            return {...state, usersData: action.users}\r\n        }\r\n        case SETPAGE: {\r\n            return {\r\n                ...state,\r\n                currentPage: action.pageId\r\n            }\r\n        }\r\n        case SETTOTALCOUNT: {\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.totalCount\r\n            }\r\n        }\r\n        case IS_FETCHING: {\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        }\r\n        case TOGGLE_IS_FOLLOWING_IN_PROGRESS: {\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.followingInProgress\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const followAC = (userId) => ({type: FOLLOW, userId});\r\nexport const unfollowAC = (userId) => ({type: UNFOLLOW, userId});\r\n//action который будет добавлять юзеров (типа из бд или еще откуда), изначально же юзеров у нас типа нет\r\n//AC action creator\r\nexport const setUsersAC = (users) => ({type: SETUSERS, users});\r\nexport const setPageAC = (pageId) => ({type: SETPAGE, pageId});\r\nexport const setTotalUsersCountAC = (totalCount) => ({type: SETTOTALCOUNT, totalCount});\r\nexport const setFetchingAC = (isFetching) => ({type: IS_FETCHING, isFetching});\r\nexport const toggleFollowingProgressAC = (followingInProgress, userId) => ({type: TOGGLE_IS_FOLLOWING_IN_PROGRESS, followingInProgress, userId});\r\n\r\n//thunk - санка - это функция, кот-я делает асинхронную операцию и которая умеет диспатчить обычные экшены (action creator), и\r\n// эту санку можно задиспатчить и store(redux) поймет что с ней делать, не пустит в редюсеры, а запустит\r\n\r\n//пример addPost принимает диспатч, включает крутилку (типа как у нас при отображении пользователей, пока идет запрос на сервак)\r\n//делает запрос на сервак и после диспатчит сообщение и выключает крутилку, крутилки - это action creator, addPost внутри как я понял тоже\r\n/*\r\nconst addPost = (dispatch) => {\r\n    dispatch(onLoading());\r\n    axios.post({message}).then(() => {\r\n        dispatch(addPost(message))\r\n        dispatch(ofLoading())\r\n    })\r\n}\r\n\r\nно message у нас нет и передать доп параметром вместе с dispatch мы его не можем поэтому надо взять ее по замыкания, сделаем обертку для addPost и в нее получим message параметром\r\n\r\nconst addPostThunkCreator = (message) => (dispatch) => {\r\n    dispatch(onLoading());\r\n    axios.post({message}).then(() => {\r\n        dispatch(addPost(message))\r\n        dispatch(ofLoading())\r\n    })\r\n}\r\n\r\naddPostThunkCreator - это thunk creator мы передаем в него какой-то message и этот thunk creator вернет нам саму санку (thunk) и мы ее уже будем диспатчить\r\nпо итогу мы диспатчим вызов thunk creator dispatch(addPostThunkCreator('hello'))\r\n\r\naddPostThunkCreator - по сути это thunk mw - middleware - \"промежуточная прослойка\" которая из стора принимает action или thunk, если это action он ее вернут в reducer, так как reducer может принимать только action - объект, который обязательно имеет хотя бы TYPE\r\nесли в thunk mw придет thunk он увидит что это функция, запустит ее, туда попадет dispatch и этот action отправить в store и дальше в reducer\r\n\r\naddPostThunkCreator это функция которая может что-то принимать и которая возвращает санку\r\n\r\n*/\r\n/*\r\nделаем санку (thunk), потому что в UsersContainer в componentDidMount делается вся эта логика, но она там не должна быть\r\nтеперь санка готова, но у нас нет this.props.currentPage, this.props.pageSize, поэтому нужно обернуть санку в санккреатор и передать в него эти параметры, чтобы в санках получить их по замыканию\r\n\r\nexport const getUsersThunk = (dispatch) => {\r\n    dispatch(setFetchingAC(true)); // диспатчим обынче экшены - action creator\r\n\r\n    userAPI.getUsers(this.props.currentPage, this.props.pageSize).then(data => {\r\n        dispatch(setFetchingAC(false));\r\n        dispatch(setUsersAC(data.items));\r\n        dispatch(setTotalUsersCountAC(data.totalCount));\r\n    })\r\n};\r\n*/\r\n\r\nexport const getUsers = (currentPage, pageSize) => {\r\n    return (dispatch) => {\r\n        dispatch(setFetchingAC(true)); // диспатчим обычные экшены - action creator\r\n        //dispatch(setPageAC(currentPage));\r\n        userAPI.getUsers(currentPage, pageSize).then(data => {\r\n            //dispatch(setPageAC(currentPage));\r\n            dispatch(setFetchingAC(false));\r\n            dispatch(setUsersAC(data.items));\r\n            dispatch(setTotalUsersCountAC(data.totalCount));\r\n        });\r\n    };\r\n};\r\n\r\n/*\r\nперепишем немного код, рефакторинг, так как toggleFollow toggleUnFollow содержат практически одинаковый код\r\nвынесем эту повторяющуюся часть в другую функцию и внутри этих будем ее вызывать\r\n\r\nexport const toggleUnFollow = (userId) => {\r\n    return (dispatch) => {\r\n        dispatch(toggleFollowingProgressAC(true, userId));\r\n        userAPI.unFollow(userId).then(response => {\r\n            if (response.data.resultCode === 0) {\r\n                dispatch(unfollowAC(userId));\r\n            }\r\n\r\n            dispatch(toggleFollowingProgressAC(false, userId));\r\n        });\r\n    };\r\n};\r\n\r\nexport const toggleFollow = (userId) => {\r\n    return (dispatch) => {\r\n        dispatch(toggleFollowingProgressAC(true, userId));\r\n        userAPI.follow(userId).then(response => {\r\n            if (response.data.resultCode === 0) {\r\n                dispatch(followAC(userId));\r\n            }\r\n            dispatch(toggleFollowingProgressAC(false, userId));\r\n        });\r\n    };\r\n};\r\n */\r\nconst followUnfollow = (dispatch, userId, apiMethod, actionCreator) => {\r\n    dispatch(toggleFollowingProgressAC(true, userId));\r\n    apiMethod(userId).then(response => {\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(actionCreator(userId));\r\n        }\r\n\r\n        dispatch(toggleFollowingProgressAC(false, userId));\r\n    });\r\n};\r\n\r\nexport const toggleUnFollow = (userId) => {\r\n    return (dispatch) => {\r\n        let apiMethod = userAPI.unFollow.bind(userAPI);\r\n        let actionCreator = unfollowAC;\r\n        followUnfollow(dispatch, userId, apiMethod, actionCreator);\r\n    };\r\n};\r\n\r\nexport const toggleFollow = (userId) => {\r\n    return (dispatch) => {\r\n        let apiMethod = userAPI.follow.bind(userAPI);\r\n        let actionCreator = followAC;\r\n        followUnfollow(dispatch, userId, apiMethod, actionCreator);\r\n    };\r\n};\r\n\r\n\r\n\r\nexport default usersReducer;","import {authAPI} from '../api/api';\r\nimport {stopSubmit} from 'redux-form';\r\n\r\n//redux-ducks говорит что название констант должно быть максимально уникальным, добавлять перед самой константой то что делает\r\n//этот reducer например было SET_USER_DATA = 'SET_USER_DATA' стало SET_USER_DATA = 'auth/SET_USER_DATA'\r\nconst SET_USER_DATA = 'auth/SET_USER_DATA/auth';\r\n\r\nlet initialState = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA: {\r\n            return {\r\n                ...state,\r\n                ...action.data,\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const setAuthUserData = (email, login, userId, isAuth) => {\r\n    return {\r\n        type: SET_USER_DATA,\r\n        data: {email, login, userId, isAuth}\r\n    }\r\n};\r\n\r\n/*\r\n вместо промисов можно переписать через async await, чтобы не использовать then, так как authAPI.me() возвращает промис\r\n мы можем дожидаться этот примис не с помощью then а с помощью await, только в асинхронной функции async\r\n когда промис зарезолвится получим то значение которым он зарезолвился, короче код скорщается и становится более линейным\r\n\r\n */\r\nexport const getAuthUserData = () =>  async (dispatch) => {\r\n    let response = await authAPI.me();\r\n\r\n    if (response.data.resultCode === 0) {\r\n        let {email, login, id} = response.data.data;\r\n        dispatch(setAuthUserData(email, login, id, true));\r\n    }\r\n    /*return authAPI.me().then(response => {\r\n        if (response.data.resultCode === 0) {\r\n            let {email, login, id} = response.data.data;\r\n            dispatch(setAuthUserData(email, login, id, true));\r\n        }\r\n    });*/\r\n    /* ====== instance.get(`auth/me`).then(response => {\r\n            if (response.data.resultCode === 0) {\r\n                let {email, login, id} = response.data.data;\r\n                this.props.setAuthUserData(email, login, id);\r\n            }\r\n        })*/\r\n};\r\n\r\n// санка для отправки данных на сайт, для авторизации\r\n\r\n// тут тоже перепишем через async await\r\nexport const login = (email, password, rememberMe) => async (dispatch) => {\r\n    let response = await authAPI.login(email, password, rememberMe);\r\n        /*\r\n         если все норм нужно снова задиспатчить getAuthUserData\r\n         а если ошибки то можно реализовать через redux-form, в котором есть по умолачнию специальный action который\r\n         можно задиспатчить - stopSubmit() - в него нужно передать какую форму мы стопаем (уникальное название которое\r\n         мы давали форме при ее создании через form-redux) для логина - form: 'login', вторым параметром объект в котором\r\n         мы указываем проблемные свой-ва (поля которые вызвали ошибку), например {email: 'Wrong email'}\r\n         так как мы передали форму login то она получит {email: 'Wrong email'} - это поле которое внутри нашей формы с\r\n         name='email' то есть email из объекта = name='email' из формы и если при вводе email была какая-то ошибка то оно подсветится\r\n         (ну или что мы там с ним сделаем) как-будто это ошибка этого поля, ну по сути так и есть мы привязали ошибку к этому полю\r\n         получится мы диспатчим\r\n         let action = stopSubmit('login', {email: 'Wrong email'});\r\n         dispatch(action);\r\n\r\n         но вообще так не делают, сервак обычно отдает общую ошибку типа неверный логин ИЛИ пароль\r\n         поэтому есть в redux-form обработка общей ошибки _error\r\n\r\n         итогу: если при запросе приходит response.data.resultCode === 0 диспатчим dispatch(getAuthUserData())\r\n         если была ошибка, то есть response.data.resultCode !== 0 то берем текст ошибки response.data.message - из документации\r\n         и выводим\r\n        */\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getAuthUserData());\r\n    } else {\r\n        let message = response.data.messages.length > 0 ? response.data.messages[0] : 'Some error';\r\n        let action = stopSubmit('login', {_error: message});\r\n        dispatch(action);\r\n    }\r\n};\r\n\r\nexport const logout = () => (dispatch) => {\r\n    authAPI.logout().then(response => {\r\n        // если все норм нужно снова задиспатчить getAuthUserData\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(setAuthUserData(null, null, null, false));\r\n        }\r\n    });\r\n};\r\n\r\nexport default authReducer;","import {getAuthUserData} from './auth-reducer';\r\n\r\nconst SET_INITIALIZED = 'SET_INITIALIZED';\r\n\r\nlet initialState = {\r\n    initialized: false\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_INITIALIZED: {\r\n            return {\r\n                ...state,\r\n                initialized: true,\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const setInitializedSuccess = () => ({type: SET_INITIALIZED});\r\n\r\n//thunk\r\nexport const initializeApp = () => (dispatch) => {\r\n    let promise = dispatch(getAuthUserData());\r\n    // dispatchResult - то что мы вернем из auth-reducer getAuthUserData, вернем authAPI.me()\r\n    // еще что-то задиспатчим\r\n    // и еще что-то задиспатчим\r\n    // только после того как dispatch(getAuthUserData()) закончился мы должны дипатчить setInitializedSuccess\r\n    // ПРАВИЛО ЗАДИСПАТЧИЛ И ЗАБЫЛ, но тут надо вернуть из диспатча что-то - из санки getAuthUserData\r\n    // ну как что-то, получается нам вернется промис и после мы задиспатчим вероятно dispatch(setInitializedSuccess())\r\n    // воспользуемся промисами, если много чего-то диспачтить то сделаем через prmise.all\r\n    /*promise.then(() => {\r\n        dispatch(setInitializedSuccess());\r\n    });\r\n    */\r\n    Promise.all([promise]).then(() => {\r\n        dispatch(setInitializedSuccess());\r\n    });\r\n};\r\n\r\nexport default appReducer;","import {applyMiddleware, combineReducers, compose, createStore} from 'redux';\r\nimport profileReducer from './profile-reducer';\r\nimport dialogsReducer from './dialog-reducer';\r\nimport sidebarReducer from './sidebar-reducer';\r\nimport usersReducer from './users-reducer';\r\nimport authReducer from './auth-reducer';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport {reducer as formReducer} from 'redux-form';\r\nimport appReducer from './app-reducer';\r\n\r\n// по сути это наш state - весь этот объект\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    messagesPage: dialogsReducer,\r\n    sidebar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n});\r\n\r\n/*\r\n теперь из-за санки getUsersThunkCreator мы получим ошибку\r\n let store = createStore(reducers);\r\n и надо заинсталить npm i redux-thunk и передать вторым аргументом в createStore applyMiddleware\r\n*/\r\n\r\n// для расширения redux devTools\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers( applyMiddleware(thunkMiddleware)\r\n));\r\n\r\n// без расширения redux в chrome\r\n//let store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\n\r\nexport default store;","import React from 'react';\r\nimport s from './Navbar.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nconst Navbar = () => {\r\n    return (\r\n        <nav className={s.nav}>\r\n            <ul>\r\n                <li className={`${s.item}`}>\r\n                    <NavLink activeClassName={s.active} to=\"/profile\">Profile</NavLink>\r\n                </li>\r\n                <li className={s.item}>\r\n                    <NavLink activeClassName={s.active} to=\"/dialogs\">Messages</NavLink>\r\n                </li>\r\n                <li className={s.item}>\r\n                    <NavLink activeClassName={s.active} to=\"/users\">Users</NavLink>\r\n                </li>\r\n                <li className={s.item}>\r\n                    <NavLink activeClassName={s.active} to=\"/news\">News</NavLink>\r\n                </li>\r\n                <li className={s.item}>\r\n                    <NavLink activeClassName={s.active} to=\"/music\">Music</NavLink>\r\n                </li>\r\n                <li className={s.item}>\r\n                    <NavLink activeClassName={s.active} to=\"/settings\">Settings</NavLink>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default Navbar;","import React from 'react';\r\nimport './Friend.css';\r\n\r\nconst Friend = (props) => {\r\n    return (\r\n        <div className=\"friend__item\">\r\n            <div className=\"friend__pic\">{props.img}</div>\r\n            <div className=\"friend__name\">{props.name}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Friend;","import React from 'react';\r\nimport './Friends.css';\r\nimport Friend from './Friend/Friend';\r\n\r\nconst Friends = (props) => {\r\n    let friend = props.friendsData.map(item => <Friend\r\n        name={item.name}\r\n        img={item.img}\r\n        key={item.id}\r\n    />);\r\n\r\n\r\n    return (\r\n        <div className=\"friends\">\r\n            <p className=\"friends__title\">Friends</p>\r\n            <div className=\"row\">\r\n                {friend}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport default Friends;","import React from 'react';\r\nimport Friends from './Friends';\r\nimport {connect} from 'react-redux';\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        friendsData: state.sidebar.friendsData\r\n    }\r\n};\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return {\r\n    }\r\n};\r\nconst FriendsContainer = connect(mapStateToProps, mapDispatchToProps)(Friends);\r\n\r\nexport default FriendsContainer;","import React from 'react';\r\nimport './Sidebar.css';\r\nimport Navbar from './Navbar/Navbar';\r\nimport FriendsContainer from './Friends/FriendsContainer';\r\n\r\nconst Sidebar = () => {\r\n    return (\r\n        <div className=\"sidebar\">\r\n            <Navbar/>\r\n            <FriendsContainer />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Sidebar;","import React from 'react';\r\n\r\nconst News = () => {\r\n    return (\r\n        <main>\r\n            News\r\n        </main>\r\n    );\r\n};\r\n\r\nexport default News;","import React from 'react';\r\n\r\nconst Music = () => {\r\n    return (\r\n        <main>\r\n            Music\r\n        </main>\r\n    );\r\n};\r\n\r\nexport default Music;","import React, {useState} from 'react';\r\nimport './Paginator.css';\r\n\r\nconst Paginator = (props) => {\r\n    /*\r\n     Math.ceil округляем кол-во страниц до большего целого, так как если элементов, например 19\r\n     и мы выводим по 5, то получится 3 страницы, а должно быть 4  и на 4-й 4 элемента, в цикле for будет 4 страницы\r\n     так как (pagesCount = 19 / 5 = ~4.5) i <= pagesCount(~4.5)\r\n    */\r\n    let pagesCount = Math.ceil(props.totalUsersCount / props.pageSize);\r\n    let pages = [];\r\n\r\n    // делим навигацию на части\r\n    //totalUsersCount - общее кол-во пользователей\r\n    //pageSize - кол-во пользователей на 1 стр\r\n    //pagesCount - кол-во страниц\r\n    console.log(props.pageSize);\r\n\r\n    //кол-во \"порций\" - это сколько раз можно пролистать по portionSize, в нашем случае portionSize = 10\r\n    //то есть если pagesCount=200/portionSize=10 = 20 раз пролистаем по 10 страниц\r\n    let portionCount = Math.ceil(pagesCount / props.portionSize);\r\n\r\n    //porionNumber - номер порции - portionCount\r\n    //setPortionNumber - функ-я устанавливающая номер порции\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n\r\n    //leftPortionNumber - левая первая цифра с которой начнется показ количества следующих 10 страниц\r\n    let leftPortionNumber = (portionNumber - 1) * props.portionSize + 1;\r\n\r\n    //rightPortionNumber - последняя цифра справа в показанных кол-вах стр\r\n    let rightPortionNumber = portionNumber * props.portionSize;\r\n\r\n    for (let i = 1; i <= pagesCount; i += 1) {\r\n        pages.push(i);\r\n    }\r\n    return (\r\n        <ul className=\"pagination\">\r\n            {portionNumber > 1 &&\r\n            <button onClick={ () => {setPortionNumber(portionNumber - 1)} }>Prev</button>}\r\n            {pages.filter(p => p >= leftPortionNumber && p <= rightPortionNumber)\r\n                .map(item => {\r\n                if (props.currentPage === item) {\r\n                    return <li key={item} className=\"pagination__item pagination__item_current\">{item}</li>;\r\n                }\r\n                return <li key={item} className=\"pagination__item\">\r\n                    <a onClick={() => {\r\n                        props.onPageChanged(item);\r\n                    }} className=\"pagination__link\" href=\"#\">{item}</a>\r\n                </li>\r\n            })}\r\n            {portionCount > portionNumber &&\r\n            <button onClick={ () => {setPortionNumber(portionNumber + 1)} }>NEXT</button>}\r\n        </ul>\r\n    );\r\n\r\n    /*const paginator = (item) => {\r\n        if (props.currentPage === item) {\r\n            return <li key={item} className=\"pagination__item pagination__item_current\">{item}</li>;\r\n        }\r\n        return (\r\n            <li key={item} className=\"pagination__item\">\r\n                <a onClick={() => {\r\n                    props.onPageChanged(item);\r\n                }} className=\"pagination__link\" href=\"#\">{item}</a>\r\n            </li>\r\n        );\r\n    };*/\r\n\r\n};\r\n\r\nexport default Paginator;","import React from 'react';\r\nimport './Users.css';\r\nimport {NavLink, Redirect} from 'react-router-dom';\r\n\r\nconst User = ({user, followingInProgress, toggleUnFollow, toggleFollow}) => {\r\n\r\n    return (\r\n        <div className='users__item'>\r\n            <div className=\"row\">\r\n                <div className=\"users__left\">\r\n                    <div className=\"users__pic\">\r\n                        <NavLink to={\"/profile/\" + user.id}>\r\n                            {\r\n                                user.photos.small != null\r\n                                    ? <img src={user.photos.small} className=\"users__photo\" alt=\"\"/>\r\n                                    : <div className=\"users__no-photo\">фотка заглуха</div>\r\n                            }\r\n                        </NavLink>\r\n                    </div>\r\n                    {\r\n                        user.followed\r\n                            ? <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                      onClick={() => {toggleUnFollow(user.id);\r\n                                          /* ушло в санку toggleFollow\r\n                                          {props.toggleFollowingProgress(true, item.id)}\r\n                                          userAPI.unFollow(item.id).then(response => {\r\n                                              if (response.data.resultCode === 0) {\r\n                                                  props.unfollow(item.id)\r\n                                              }\r\n\r\n                                              props.toggleFollowingProgress(false, item.id);\r\n                                          });*/\r\n\r\n                                      }} className='users__btn'>Unfollow</button>\r\n\r\n                            : <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                      onClick={() => {toggleFollow(user.id)}}\r\n                                      className='users__btn'>Follow</button>\r\n                    }\r\n                </div>\r\n                <div className=\"users__right\">\r\n                    <div className=\"users__block row\">\r\n                        <div className=\"users__info row\">\r\n                            <p className=\"users__name\">{user.name}</p>\r\n                            <p className=\"users__status\">{user.status}</p>\r\n                        </div>\r\n                        <div className=\"users__location\">\r\n                            <p className=\"users__country\">{'item.location.userCountry'}</p>\r\n                            <p className=\"users__city\">{'item.location.userCity'}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default User;","import React from 'react';\r\nimport './Users.css';\r\nimport {NavLink, Redirect} from 'react-router-dom';\r\nimport Paginator from '../../common/Paginator/Paginator';\r\nimport User from './User';\r\n\r\nconst Users = (props) => {\r\n\r\n    // тут пока показ авторизации уберем, так как хоть что-то надо ж видеть наверно хз\r\n    /*if (!props.isAuth)\r\n        return <Redirect to='/login' />;*/\r\n\r\n    return (\r\n        <div className='users'>\r\n            <h2 className='users__title'>UsersList</h2>\r\n            {\r\n                props.usersData.map(item => <User key={item.id} user={item}\r\n                      followingInProgress={props.followingInProgress}\r\n                      toggleUnFollow={props.toggleUnFollow}\r\n                      toggleFollow={props.toggleFollow} />\r\n                )\r\n            }\r\n            <Paginator totalUsersCount={props.totalUsersCount}\r\n                       pageSize={props.pageSize}\r\n                       currentPage={props.currentPage}\r\n                       portionSize={10}\r\n                       onPageChanged={props.onPageChanged}/>\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\nexport default Users;","import {createSelector} from 'reselect';\r\n// selector - фун-я кот-я принимает state целиком, достает то что нужно и возвращает в бизнес\r\n// selector - вообще если нам нужно что-то поменять в бизнесе, то благодаря реселекторам не нужно все менять в ui\r\n// селекторы могут быть очень сложными, что-то фильтровать, каждый раз при фильтрации или лююом изменении состояния\r\n// мы будем получать перерисовку\r\n// !!!!!! перерисовка, перекалькуляция, сложно дебажить - решение видимо библиотека reselect\r\n// библиотека reselect - функция не перезапускается если в этом нет смысла, с нашими селекторами, которые написаны руками\r\n// все функции вызываются когда происходит изменение состояния\r\n// библиотека reselect - при первом запуске сохраняет результат вызова у себя (кеш, память хз), и след раз при вызове сравнивает результат\r\n// с сохраненным, но тогда там всегда будет первый результат и функция не будет запускаться, а будет возвращать нам самый первый\r\n// результат, поэтому надо ей сказать от чего она зависит, а завсити она от state и если state изменился то кеш или память сбрасывается\r\n// и мы получаем новый результат\r\n// мы говорим ты зависишь от 1 2 3, и если при очередном запросе 1 2 3 в стэйте не понменялось, то нет смысла перезапускать селектор,\r\n// если это только непервый запуск его, если какая-то из зависимостей 1 2 3 изменилась, то нужно сбросить кеш и запустить функцию снова\r\n// чтобы получить новый результат - библиотека reselect\r\n// по итогу простые селекторы в которых нет ни каких опреаций кроме возврата примитива мы пишем сами, а сложные\r\n// с помощью реселект функции createSelector которая возвращает селектор, внутрь передаем функцию которая будет там чото считать и тд\r\n/*\r\nв общем у нас будет простой селектор, на нашем примере, getUserSelector который принимает state и возвращает просто юзеров\r\nпотом будет селектор который принимает state у себя вызывает наш простой селектор getUserSelector и возвращает фильтрованных юзеров\r\nи селектор созданный с помощью реселекта который уже принимает самих юзеров и с ними что-то делает\r\nВОПРОС откуда взять реселекту этих юзеров - передать первым параметром нащ простой селектор\r\n\r\nполучается типа\r\n\r\nconst getUserSelector = (state) => {\r\n    return state.usersPage.usersData\r\n};\r\n\r\nconst getUsersSuperSelector = createSelector(getUserSelector, (users) => {\r\n    return users.filter(item => item)\r\n})\r\n\r\nвот в users попадем то что вернул getUserSelector и потом с users уже идет работа\r\n\r\nтакже getUsersSuperSelector может зависить от многих других мелких селекторов таких как getUserSelector или вычисляемых и reselect следит\r\nза этими изменениями и ничего не перерисовывают если это не нужно\r\n\r\nconst getUsersSuperSelector = createSelector(getUserSelector, getIsFetching, (users, isFetching) => {\r\n    return users.filter(item => item)\r\n})\r\n\r\ngetUsersSuperSelector - вызываем в mapStateToProps UserContainer\r\n*/\r\n\r\nexport const getUser = state => state.usersPage.usersData;\r\n\r\nexport const userSelector = createSelector(getUser, (users) => {\r\n    return users.filter(item => true)\r\n});\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize\r\n};\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount\r\n};\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage\r\n};\r\n\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching\r\n};\r\n\r\nexport const getFollowingInProgress = (state) => {\r\n    return state.usersPage.followingInProgress\r\n};\r\n\r\n","import React from 'react';\r\nimport {\r\n    toggleFollow,\r\n    toggleUnFollow,\r\n    setPageAC,\r\n    getUsers,\r\n} from '../../redux/users-reducer';\r\nimport {connect} from 'react-redux';\r\nimport Users from './Users';\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport {withAuthRedirect} from '../../hoc/withAuthRedirect';\r\nimport {compose} from 'redux';\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getIsFetching,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    userSelector,\r\n    getUser,\r\n} from '../../redux/users-selectors';\r\n\r\n//мы сами диспатчили только объекты, точнее мы можем диспатчить только объекты,\r\n\r\n//DAL - data access layer\r\n// UI - react, BLL (бизнес логика business logic layer) - redux, DAL - data access layer\r\n// в классическом подходе зависимость такая UI общается с BLL, BLL общается с DAL. UI не общается с DAL -\r\n//(!!!!) тут я полгаю понял не так, у нас UI общается с BLL, а должно быть UI общается с DAL, BLL общается с дал, UI не общается с BLL\r\n// (!!!!!!) хотя видимо по итогу ui -> bll -> dal -> servak -> dal -> bll -> ui - ui просит у bll дай данные плиз, bll пинает дал чтобы\r\n// тот сделал запрос на сервак, дал делает, отдает данные bll, bll рендерит ui\r\n/*\r\n сейчас у нас компонента делает запрос к api - это не правильно, поэтому делаем DAL уровень (api это dal), он будет общаться с api, UI будет общатсья с DAL\r\n*/\r\n\r\n//из UsersAPIComponent перенесли этот класс сюда и сделали одну контейнерную компоненту\r\nclass UsersContainer extends React.Component {\r\n\r\n    componentDidMount() {\r\n        // сюда в пропсы попадает не getUsersThunkCreator (не санк креатор) а колбек, connect позволяет не создавать этот колбек он создается внутри и вызывает саму санку перепишем в connect getUsers: getUsersThunkCreator()\r\n        // лучше в контейнерных копонентах доставать пропсы через деструктуризацию\r\n\r\n        // this.props.getUsers(this.props.currentPage, this.props.pageSize);\r\n        const {currentPage, pageSize} = this.props;\r\n        this.props.getUsers(currentPage, pageSize);\r\n        /* это ушло в санку в user-reducer - getUsersThunkCreator\r\n        this.props.setFetchingAC(true);\r\n\r\n        userAPI.getUsers(this.props.currentPage, this.props.pageSize).then(data => {\r\n            this.props.setUsersAC(data.items);\r\n            this.props.setTotalUsersCountAC(data.totalCount);\r\n            this.props.setFetchingAC(false);\r\n        })*/\r\n    }\r\n\r\n    onPageChanged = (pageId) => {\r\n        this.props.getUsers(pageId, this.props.pageSize);\r\n        this.props.setPageAC(pageId);\r\n    };\r\n\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Preloader /> : null}\r\n            <Users\r\n                totalUsersCount={this.props.totalUsersCount}\r\n                pageSize={this.props.pageSize}\r\n                currentPage={this.props.currentPage}\r\n                usersData={this.props.usersData}\r\n                onPageChanged={this.onPageChanged}\r\n                toggleUnFollow={this.props.toggleUnFollow}\r\n                toggleFollow={this.props.toggleFollow}\r\n                followingInProgress={this.props.followingInProgress}\r\n                isAuth={this.props.isAuth}\r\n            />\r\n        </>\r\n    }\r\n}\r\n/*\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        usersData: state.usersPage.usersData,\r\n        pageSize: state.usersPage.pageSize,\r\n        totalUsersCount: state.usersPage.totalUsersCount,\r\n        currentPage: state.usersPage.currentPage,\r\n        isFetching: state.usersPage.isFetching,\r\n        followingInProgress: state.usersPage.followingInProgress,\r\n        isAuth: state.auth.isAuth\r\n    }\r\n};\r\n */\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        usersData: getUser(state),\r\n        //userData: userSelector(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n    }\r\n};\r\n\r\n// mapStateToProps принимает весь state и возвращает то что нам нужно изменить (мы возвращаем то что нам надо)\r\n\r\n\r\n/*\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        follow: (userId) => {\r\n            dispatch(followAC(userId))\r\n        },\r\n        unfollow: (userId) => {\r\n            dispatch(unfollowAC(userId))\r\n        },\r\n        setUsers: (users) => {\r\n            dispatch(setUsersAC(users))\r\n        },\r\n        newPage: (pageId) => {\r\n            dispatch(setPageAC(pageId))\r\n        },\r\n        setTotalUsersCount: (totalCount) => {\r\n            dispatch(setTotalUsersCountAC(totalCount))\r\n        },\r\n        setIsFetching: (isFetch) => {\r\n            dispatch(setFetchingAC(isFetch))\r\n        }\r\n    }\r\n};\r\n\r\n */\r\n// напоминю себе, что теперь в Users через connect придет props state.usersPage.usersData из mapStateToProps\r\n\r\n/*\r\n    еще напоминю себе, есть реакт, есть редакс, есть колбек в презентационной (тупой) компаненте\r\n    она отправлят с помощью колбека \"посыл\" внешней компоненте (контейнерной), которая уже общаяется со стэйтом через mapDispatchToProps\r\n    то есть диспатчить данные в редакс\r\n    получается презентационная компонента ничего не знает про какой-то там диспатч, ей ващето пофигу, она вызывает колбек, который идет к родительской - контейнерной компоненте, а родительская (контейнерная) созданная с помощью connect делает диспатч\r\n*/\r\n\r\n/*\r\n mapStateToProps возвращает какой-то объект и mapDispatchToProps возвращает объекты (колбеки)\r\n connect их вызывает и получает эти два объекта, они \"склевиваются\" и превращаются в \"пропсы\" props - один объект\r\n в mapDispatchToProps все колбеки по сути делают одно и тоже - получают данные из компонента и диспатчат их\r\n в connect можно передать не функцию mapDispatchToProps, а сразу объект из этих функций, connect\r\n вызывает фунцию mapDispatchToProps и закидывае туда диспатч и у нас есть доступ к диспатч по замыканию, но если передать объект до до диспатча не будет доступа, поэтому мы можем передать в connect объект без колбеков, типа создай сам колбек.\r\n Передадим объект такого вида: { follow: followAC, unfollow: unfollowAC, setUsers: setUsersAC  } и тд\r\n мы передаем просто объект с action creator\r\n Получается follow: followAC это одно и тоже что\r\n follow: (userId) => {\r\n    dispatch(followAC(userId))\r\n}\r\nэту обертку делает сам connect, то есть ее мы можем не делать\r\nв итоге было так\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersContainer);\r\n\r\nстало так\r\nexport default connect(mapStateToProps, {\r\n    follow: followAC,\r\n    unfollow: unfollowAC,\r\n    setUsers: setUsersAC,\r\n    newPage: setPageAC,\r\n    setTotalUsersCount: setTotalUsersCountAC,\r\n    setIsFetching: setFetchingAC\r\n})(UsersContainer);\r\n\r\nно чот там еще можно сократить, вот чо\r\nесли в объекте свойства и значения совпадают, то можно писать просто одно название:\r\nесть переменная let name = 'vasya', есть объект у которого поле name равно значению этой переменной\r\nlet obj = {name: name} - можно написать так let obj = {name} - получится одно и тоже, то есть если названия свойств в объекте\r\nсовпадает со значением, то можно так сократить, поэтому можно переименовть наши action creator, ну или названия функций в компоненте,\r\nчтобы названия стали совпадать со значениями\r\n\r\n\r\nмы передаем объект функций (action creator) в connect followAC, unfollowAC и тд, connect из этих функций сам создает коллбек\r\nкоторый внутри задиспатчит то что вернет action creator\r\n*/\r\n\r\n// вся инфа по след коду в ProfileContainer\r\n\r\n// перенесем в compose let AuthRedirectComponent = withAuthRedirect(UsersContainer);\r\n\r\n/* было\r\nlet AuthRedirectComponent = withAuthRedirect(UsersContainer);\r\nexport default connect(mapStateToProps, {toggleFollow, toggleUnFollow, setPageAC, getUsers})(AuthRedirectComponent);\r\n\r\nесли нужно убрать редирект для не залогиненых\r\nlet AuthRedirectComponent = withAuthRedirect(UsersContainer); - удаляем вообще и в connect передаем UsersContainer\r\nexport default connect(mapStateToProps, {toggleFollow, toggleUnFollow, setPageAC, getUsers})(UsersContainer);\r\n\r\nа теперь с compose чтобы убрать редирект нужно просто убрать из цепочки вызовов withAuthRedirect\r\n*/\r\n\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, {toggleFollow, toggleUnFollow, setPageAC, getUsers}),\r\n    //withAuthRedirect,\r\n)(UsersContainer);\r\n\r\n","import React from 'react';\r\n\r\nconst Settings = () => {\r\n    return (\r\n        <main>\r\n            settings\r\n        </main>\r\n    );\r\n};\r\n\r\nexport default Settings;","import React from 'react';\r\nimport h from './Header.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nconst Header = (props) => {\r\n    return (\r\n        <header className={[h.header, h.row].join(' ')}>\r\n            <div className={h.logo}>logo</div>\r\n            <div>\r\n                {props.isAuth\r\n                    ? <div>{props.login} <button onClick={props.logout}>Log out</button></div>\r\n                    : <NavLink className={h.loginBlock} to={'/login'}>LOGIN</NavLink>}\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport Header from './Header';\r\nimport {connect} from 'react-redux';\r\nimport {logout} from '../../redux/auth-reducer';\r\n\r\nclass HeaderContainer extends React.Component {\r\n    // перенесем это в App.js из-за редиректов\r\n    /*componentDidMount() {\r\n        this.props.getAuthUserData();\r\n    }*/\r\n\r\n    render() {\r\n        //console.log(this.props);\r\n        return (\r\n            <Header {...this.props} />\r\n        );\r\n    }\r\n};\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n        userId: state.auth.userId\r\n    }\r\n};\r\n// logout - опять же это санккреатор, когда он попадет в коннект, коннект создать обертку\r\nexport default connect(mapStateToProps, {logout})(HeaderContainer);","import React from 'react';\r\nimport {Field, reduxForm} from 'redux-form';\r\nimport {Input} from '../../common/FormsControls/FormsControls';\r\nimport {required} from '../../utils/validators/validators';\r\nimport {connect} from 'react-redux';\r\nimport {login} from '../../redux/auth-reducer';\r\nimport {Redirect} from 'react-router-dom';\r\nimport style from '../../common/FormsControls/FormsControls.module.css';\r\n\r\n// деструктуризация - чтобы не писать export const LoginForm = (props) и потом везде props\r\n// props.handleSubmit props.error в сам компонент запишем пропсы через деструктуризацию\r\n// LoginForm = ({handleSubmit, error}) и дальше уже в компоненте будем использовать просто handleSubmit error без props.\r\nexport const LoginForm = ({handleSubmit, error}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                <Field validate={[required]} name={'email'} type={\"text\"} placeholder={'login'} component={Input}/>\r\n            </div>\r\n            <div>\r\n                <Field validate={[required]} name={'password'} type={\"password\"} placeholder={'password'} component={Input}/>\r\n            </div>\r\n            <div>\r\n                <Field name={'rememberMe'} type={\"checkbox\"} component={Input}/> remember me\r\n            </div>\r\n            {/*\r\n            добавление общей ошибки через redux-form из auth-reducer\r\n            */}\r\n            {error && <div className={style.formSummaryError}>\r\n                {error}\r\n            </div>}\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n};\r\n/*\r\nstore.getState().form - можно посмотреть все что связано со стейтом для нашей формы\r\nу Field component обязательный, как и name\r\n\r\nкак теперь получить эти данные из формы при submit\r\nreduxForm контейнерная компонента прокидывает пропс handleSubmit который мы должны повесить на форму onSubmit\r\nвнутри handleSubmit уже стоит preventDefault и при лкике на кнопку перезагрузки стр не будет,\r\nтакже там идет сбор всех данных форм и упаковывается в объект и вызывается onSubmit и передает туда собранные данные,\r\nтакже мы должны передать onSubmit в форму\r\n\r\nу нас есть наша форма, вокруг контейнерная компонента образовалась redux-form и в эту контейнерную компоненту мы\r\nдолжны передать onSubmit, когда мы тыкаем на кнопку, в нашей форме вызывается handleSubmit он приходит с контейнерной\r\nкомпоненты (с нашей получается и делает эти 3 дейтсвия: preventDefault, сбор данных и упаковка, и onSubmit) и вызовет\r\nродительский как я понял onSubmit что типа данные пришли из формы. Короче в LoginReduxForm передаем onSubmit\r\n\r\n\r\nКАК РАБОТАЕТ ВСЕ\r\nв эту форму LoginForm контейнерная компонента LoginReduxForm прокидывает props.handleSubmit который вызовется во время submit\r\nвнутри handleSubmit вызовется то что пришло в эту контейнерную комп-ту LoginReduxForm мы в нее передаем onSubmit={onSubmit}\r\nв него приходят даннеы собранные этой компонентой\r\n */\r\n\r\n//LoginReduxForm - по сути контейнерная компонента вокруг нашей формы\r\nconst LoginReduxForm = reduxForm({\r\n    // необходимо дать уникальное имя\r\n    form: 'login'\r\n})(LoginForm);\r\n\r\nconst Login = (props) => {\r\n    //formData сюда придут все значения из формы\r\n    // login - тут это callback функция из connect (который вызвал thunk creator login и назвал также)\r\n    // которая внутри себя диспатчит вызов thunk creator login, колбек принимает formData.email, formData.password, formData.rememberMe\r\n    // эти параметры, а потом диспатчит вызов thunk creator login и в него передаются эти же параметры\r\n    const onSubmit = (formData) => {\r\n        props.login(formData.email, formData.password, formData.rememberMe)\r\n    };\r\n    if (props.isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n    return (\r\n        <div>\r\n            <h1>Login</h1>\r\n            <LoginReduxForm onSubmit={onSubmit} />\r\n        </div>\r\n    )\r\n};\r\n// login - тут это thunk creator\r\n// isAuth чтобы получить надо передать mapStateToProps\r\n// export default connect(null, {login})(Login);\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\nexport default connect(mapStateToProps, {login})(Login);\r\n\r\n","import React, {Component, Suspense} from 'react';\nimport './App.css';\nimport {Route, withRouter} from 'react-router-dom';\nimport Sidebar from './components/Sidebar/Sidebar';\n//import DialogsContainer from './components/Dialogs/DialogsContainer';\nimport News from './components/News/News';\nimport Music from './components/Music/Music';\nimport UsersContainer from './components/Users/UsersContainer';\nimport Settings from './components/Settings/Settings';\n//import ProfileContainer from './components/Profile/ProfileContainer';\nimport HeaderContainer from './components/Header/HeaderContainer';\nimport Login from './components/Login/Login';\nimport {connect} from 'react-redux';\nimport {compose} from 'redux';\nimport {initializeApp} from './redux/app-reducer';\nimport Preloader from './common/Preloader/Preloader';\nimport {withSuspense} from './hoc/withSuspense';\n\n//React.lazy - загрузка компонентов по мере их необходимости, то есть сразу весь проект не грузим\n// грузим то что нужно, нам, заказчику, хз кому, можно одно грузить так, другое так, третье так и тд\n// допустим мы не хотим грузить сразу dialogs и profile - тогда удаляем их из импорта и прописываем\n// также нужно добавить suspense для такой загрузки, обернуть нашу компоненту\n// <Suspense fallback={<div>Loading...</div>}><DialogsContainer/></Suspense>\n/*\n<Route path='/dialogs' render={() => {\n    return <Suspense fallback={<div>Loading...</div>}><DialogsContainer/></Suspense>\n}\n}/>\n */\nconst DialogsContainer = React.lazy( () => import('./components/Dialogs/DialogsContainer') );\nconst ProfileContainer = React.lazy( () => import('./components/Profile/ProfileContainer') );\n\n// создали обертку для Suspense - import {withSuspense} from './hoc/withSuspense'; убрали дублирование кода\n// <Route path='/profile/:userId?' render={withSuspense(ProfileContainer)}/>\n\n\n// так как у нас косяк при обновлении страницы, происходит редирект на логин, а потом на профайл\n// исправим это тут, перепишем в классовую компоненту\nclass App extends Component {\n    // переносим из header\n    // короче вообще это убираем в app-reducer this.props.getAuthUserData();\n    componentDidMount() {\n        this.props.initializeApp();\n    }\n    render() {\n        if (!this.props.initialized) {\n            return <Preloader/>\n        } else {\n            return (\n                <div className=\"App wrapper\">\n                    <HeaderContainer/>\n                    <div className=\"row\">\n                        <Sidebar/>\n                        {/*так не передать параметры (данные)\n                    но можно так let a = () => <Dialogs /> и запихать в <Route path='/dialogs' component={a}/>, хотя и в component можно передать анон функцию с <Dialogs />\n                    <Route path='/dialogs' component={Dialogs}/>\n                    <Route path='/profile' component={Profile}/>\n                    <Route path='/news' component={News}/>\n                    <Route path='/music' component={Music}/>\n                    <Route path='/settings' component={Settings}/>*/}\n\n                        {/* можно так передать,\n                    <Route path='/dialogs' render={() => <Dialogs\n                        dialogs={props.state.messagesPage.dialogsData}\n                        msg={props.state.messagesPage.messagesData} />} />\n                        а можно весь объект передать в компоненту и там брать то что надо:\n                        <Route path='/dialogs' render={() => <Dialogs\n                        state={props.state.messagesPage} />} />\n                        */}\n\n                        <Route path='/dialogs' render={() => {\n                            return <Suspense fallback={<div>Loading...</div>}><DialogsContainer/></Suspense>\n                        }\n                        }/>\n                        <Route path='/profile/:userId?' render={withSuspense(ProfileContainer)}/>\n                        <Route path='/users' render={() => <UsersContainer/>}/>\n                        <Route path='/news' component={News}/>\n                        <Route path='/music' component={Music}/>\n                        <Route path='/settings' component={Settings}/>\n                        <Route path='/login' component={Login}/>\n                    </div>\n                </div>\n            );\n        }\n    }\n}\n\n// вроде как роутинг фигово работал поэтому withRouter надо обернуть, но у меня вроде и так норм пахало, может уже пофиксили\n// export default connect(null, {getAuthUserData})(App);\n\nlet mapStateToProps = (state) => ({\n    initialized: state.app.initialized\n});\n\nexport default compose(\n    withRouter,\n    connect(mapStateToProps, {initializeApp}))(App);\n","import React, {Suspense} from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\n\r\n// HOC - контейнерная компонента не обзяательно классовая или функциональная или презенационная, она просто над другой компонентой\r\n// а вот это уже HOC, который мы можем экспортировать и передавать в компоненты где нужно сделать редирект если не авторизован\r\n// Component - сюда будут попадать различные компоненты\r\n// HOC - принято называть с with\r\n\r\n\r\nexport const withSuspense = (Component) => {\r\n    return (props) => {\r\n        return <Suspense fallback={<div>Loading...</div>}>\r\n            <Component {...props}/>\r\n        </Suspense>\r\n    }\r\n};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {Provider} from 'react-redux';\r\nimport store from './redux/redux-store';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {BrowserRouter} from 'react-router-dom';\r\n\r\n//выгрузили (сделали deploy) проекта на github pages, для этого прописали в package.json\r\n// \"homepage\": \"https://safychcss.github.io/test\", - адрес репозитория, в объект scripts package.json\r\n// добавили \"predeploy\": \"npm run build\", \"deploy\": \"gh-pages -d build\"\r\n// добавили пакет gh-pages, проделали другие манипуляции чтобы это все открывалось\r\n// чтобы открывались страницы в приложении https://safychcss.github.io/test относительно /test/ нужно в\r\n// <BrowserRouter> добавить basename, но тогда на локалхосте будет неправильно пахать, а нам надо\r\n// чтобы открывалось правильно с разных урлов basename={process.env.PUBLIC_URL} вот так надо прописать и будет гуд\r\nReactDOM.render(\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n        <Provider store={store}>\r\n            <App />\r\n        </Provider>\r\n    </BrowserRouter>,\r\n    document.getElementById('root')\r\n);\r\n\r\n//rerenderTree - идем в рендер и вызываем, передаем в функцию state(props)\r\n/*\r\nбольше не нужно подписываться и перерисовывать все, так как контейнерная компонента образуется с помощью connect, внутри connect локальный subscribe, который каждый раз когда рпоисходят в state изменения запускает mapStateToProps и формируется новый объект, который сраванивается со старым (внутренности объектов), если ничего не поменялось соответственно ничего и не отрисовывается\r\n\r\nв данный момент у нас добавляется пост, но отрисовки нет, так как в редакс считается что объект не должен меняться, но мы туда добавили новую запись, он поменялся, но внутри редакс считает что изменений не было, так как мы не должны менять объект, поэтому нужно делать копию объекта\r\n\r\nданную функцию мы экспортируем в дрвугой файл, который я уже удалил, так как в state нам надо вызывать эту фнкцию для перересовки\r\nно импортировать ее в state мы не можем так как экспортируем сам state в index и получится циклическая зависимость, поэтому в новом файле\r\nпараметром передадим state, потом благополучно удаляем этот файл на след занятии)) поэтому экспорт ререндер убираем\r\n\r\n\r\nесли в App передать объект state с методом, то this норм, а если через app передаем коллбек то контекст вызова теряется и нужна привязка\r\nнапример bind addPost={store.addPost.bind(store)}\r\n\r\nexport let rerenderTree = (state) => {\r\n    ReactDOM.render(\r\n        <BrowserRouter>\r\n            <App state={state} addPost={addPost} />\r\n        </BrowserRouter>, document.getElementById('root')\r\n    );\r\n}\r\n\r\nrerenderTree(state);\r\n\r\nstore.subscribe(() => {\r\n    rerenderTree();\r\n});*/\r\n\r\nwindow.store = store;\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__2OTLd\",\"error\":\"FormsControls_error__1rnQR\",\"formSummaryError\":\"FormsControls_formSummaryError__2sQ7M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__4ppCZ\",\"row\":\"Header_row__1DmTc\",\"logo\":\"Header_logo__Iwsxd\",\"loginBlock\":\"Header_loginBlock__3Zy8i\"};","import React from 'react';\r\nimport preloader from '../../img/loader.gif';\r\n\r\nlet Preloader = (props) => {\r\n    return <img style={{position: 'absolute', top: '50%', left: '50%'}} src={preloader} />\r\n};\r\n\r\nexport default Preloader;","import React from 'react';\r\nimport styles from './FormsControls.module.css'\r\n\r\n/* поскольку нам нужны не все пропсы, а только input деструктиризируем объект и заберем только то что нам надо\r\n {...props} -> {...props.input}, но так пахать не будет, надо сделать через rest оператор - почитать надо не забыть!!!!!\r\n ({input, meta, ...props}) - значит мы раскукожили input, meta, все остальное оставили в props - input, meta там уже нет\r\n\r\nесли есть какие-то ошибки redux-form будет из сам закидывать нам в компоненту через meta.error, но если у нас по умолчанию required\r\nто meta.error всега true, а мы хотим делать error если пользователь был в input и произошла потеря фокуса, а инпут остался пустым\r\nдля этого есть в meta.touched - типа если элемент был тронут\r\n!!!!!!!\r\nmeta.error - также содержит текст ошибки из нашего валидатора (return 'Field is required'; return `Max length ${maxLength} symbols`;)\r\n\r\nmeta.touched && meta.error - вынесем в переменную\r\n\r\nно для textarea в принипе проврять такую ошибку такое себе, чисто для примера норм\r\n */\r\n\r\n/*export const Textarea = ({input, meta, ...props}) => {\r\n    const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n            <div>\r\n                <textarea {...input} {...props}/>\r\n            </div>\r\n            { hasError && <span>{meta.error}</span> }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const Input = ({input, meta, ...props}) => {\r\n    const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n            <div>\r\n                <input {...input} {...props}/>\r\n            </div>\r\n            { hasError && <span>{meta.error}</span> }\r\n        </div>\r\n    );\r\n};\r\nтогда перепишем эти компоненты ниже FormColntrol, просто так\r\n*/\r\n\r\n/*\r\nтак как у нас меняется в обоих компонентах только часть кода:\r\n<input {...input} {...props}/>\r\n<textarea {...input} {...props}/>\r\nпробеум переписать в один компонент а эти внутренности передовать через пропсы - через child\r\n */\r\n\r\nconst Element = Elem => ({input, meta, ...props}) => {\r\n    const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n            <div>\r\n                <Elem {...input} {...props} />\r\n            </div>\r\n            { hasError && <span>{meta.error}</span> }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport const Textarea = Element('textarea');\r\nexport const Input = Element('input');","export const required = value => {\r\n    if (value)\r\n        return undefined;\r\n\r\n    return 'Field is required';\r\n};\r\n\r\n/*\r\nmaxLength мы можем использовать во многих местах - maxLength30, maxLength40 и тд\r\nне делать же нам кучу таких функций, но передать параметр в validate={[required, maxLength(параметр), и тд]} мы не можем, так как\r\nданную функцию вызывает redux, поэтому обернем maxLength в еще одну функцию, которая принимает в качестве параметра\r\nкол-во символов и возвращает другую функцию, которую и вызовет внутри редакс с кол-ом параметров полученных по замыканию\r\nбудет видеть maxLength\r\n\r\nexport const maxLength = value => {\r\n    if (value.length > 30)\r\n    return 'Maxlength 30 symbols';\r\n\r\nreturn undefined;\r\n};\r\n*/\r\n\r\nexport const maxLengthCreator = maxLength => value => {\r\n    if (value.length > maxLength)\r\n        return `Max length ${maxLength} symbols`;\r\n\r\n    return undefined;\r\n};","import {profileAPI, userAPI} from '../api/api';\r\nimport {combineReducers} from 'redux';\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst UPDATE_NEW_POST_TEXT = 'UPDATE-NEW-POST-TEXT';\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\nconst DELETE_POST = 'DELETE_POST';\r\n\r\n// reducer - чистая функция, кот-ая принимает state и action, если надо применяет этот action к state и возвращает новый state (его копию) или возвращает старый state(который пришел)\r\n\r\n// action это объект в котором инкапсулированны все данные для того чтобы редусер получил этот action и применил изменения на свой state\r\n\r\n// initialState - нужен для combineReducers, изначально если initialState нет, то и в profileReducer state = undefined\r\n// поэтому мы получим обшибку\r\nlet initialState = {\r\n    postData:[\r\n        {message: 'Hi, how are you', id: 1, likeCount: 17},\r\n        {message: 'It is my first post', id: 2, likeCount: 37},\r\n        {message: 'It is my first sdga rg s', id: 3, likeCount: 27},\r\n        {message: 'It is my fergsedrirst poaedrgsst', id: 4, likeCount: 47},\r\n    ],\r\n    //newPostText: 'Kakoy-to текст епта',\r\n    profile: null,\r\n    status: \"\"\r\n};\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_POST: {\r\n            let newPost = {\r\n                message: action.newPostMessage,\r\n                id: 5,\r\n                likeCount: 0\r\n            };\r\n            // так как объект внутри редакса считается неизмененным, делаем копию\r\n            //let stateCopy = {...state};\r\n            // копия происходит только вложенных свойств, если свойство является объектом оно не копируется, а остается ссылкой на этот объект, поэтому делаем и копию внутреннего объекта, теперь в mapStateToProps будет приходить новый объект\r\n            //stateCopy.postData = [...state.postData];\r\n            //stateCopy.postData.push(newPost);\r\n            //stateCopy.newPostText = '';\r\n\r\n            return {\r\n                ...state,\r\n                postData: [...state.postData, newPost],\r\n            };\r\n        }\r\n        case UPDATE_NEW_POST_TEXT: {\r\n            return {\r\n                ...state,\r\n                newPostText: action.text\r\n            };\r\n        }\r\n        case SET_USER_PROFILE: {\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n        case SET_STATUS: {\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case DELETE_POST: {\r\n            return {\r\n                ...state,\r\n                postData: state.postData.filter(item => item.id != action.postId)\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n};\r\n\r\nexport const addPostActionCreator = (newPostMessage) => {\r\n    return {\r\n        type: ADD_POST,\r\n        newPostMessage\r\n    }\r\n};\r\n\r\nexport const deletePostActionCreator = (postId) => {\r\n    return {\r\n        type: DELETE_POST,\r\n        postId\r\n    }\r\n};\r\n\r\nexport const updatePostActionCreator = (text) => {\r\n    return {\r\n        type: UPDATE_NEW_POST_TEXT,\r\n        text: text\r\n    }\r\n};\r\nexport const setUserProfile = (profile) => {\r\n    return {\r\n        type: SET_USER_PROFILE,\r\n        profile\r\n    }\r\n};\r\n\r\nexport const setStatus = (status) => {\r\n    return {\r\n        type: SET_STATUS,\r\n        status\r\n    }\r\n};\r\n\r\n// лучше использовать везде вместо then async await\r\nexport const getUserProfile = (userId) => (dispatch) => {\r\n    userAPI.getProfile(userId).then(response => {\r\n        dispatch(setUserProfile(response.data));\r\n    })\r\n};\r\n\r\nexport const getUserStatus = (userId) => (dispatch) => {\r\n    profileAPI.getStatus(userId).then(response => {\r\n        dispatch(setStatus(response.data));\r\n    })\r\n};\r\n\r\nexport const updateUserStatus = (status) => (dispatch) => {\r\n    profileAPI.updateStatus(status).then(response => {\r\n        if (response.data.resultCode === 0) {\r\n            //dispatch(setStatus(response.data)); заепался искать ошибку response.data отправлял объект и получал ошибку\r\n            // отправил так\r\n            dispatch(setStatus(status));\r\n        }\r\n    })\r\n};\r\n\r\nexport default profileReducer;"],"sourceRoot":""}